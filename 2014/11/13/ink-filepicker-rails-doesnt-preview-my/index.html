<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Ink/filepicker-rails doesn't preview my unsupported image format</title>
<style>html body{font-family:raleway,sans-serif;background-color:#fff}:root{--accent:red;--border-width:5px}</style>
<link rel=stylesheet href=//www.brysgo.com/css/main.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css>
<link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous>
<link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script>$(document).on('click',function(){$('.collapse').collapse('hide')})</script>
<meta name=generator content="Hugo 0.86.1">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-1024054-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-1024054-3')</script>
<script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
<div class=container>
<div class=navbar-header>
<a class="navbar-brand visible-xs" href=#>Ink/filepicker-rails doesn't preview my unsupported image format</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
</div>
<div class="collapse navbar-collapse">
<ul class="nav navbar-nav">
<li><a href=/>Home</a></li>
<li><a href=/post/>Posts</a></li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li class=navbar-icon><a href=mailto:brysgo@gmail.com><i class="fa fa-envelope-o"></i></a></li>
<li class=navbar-icon><a href=https://github.com/brysgo/><i class="fa fa-github"></i></a></li>
<li class=navbar-icon><a href=https://twitter.com/brysgo/><i class="fa fa-twitter"></i></a></li>
<li class=navbar-icon><a href=https://www.linkedin.com/in/brysgo/><i class="fa fa-linkedin"></i></a></li>
<li class=navbar-icon><a href=https://stackoverflow.com/users/386294/brysgo><i class="fa fa-stack-overflow"></i></a></li>
</ul>
</div>
</div>
</nav>
<main>
<div>
<h2>Ink/filepicker-rails doesn't preview my unsupported image format</h2>
<h5>November 13, 2014</h5>
<a href=//www.brysgo.com/tags/development><kbd class=item-tag>development</kbd></a>
<a href=//www.brysgo.com/tags/filepicker><kbd class=item-tag>filepicker</kbd></a>
<a href=//www.brysgo.com/tags/rails><kbd class=item-tag>rails</kbd></a>
</div>
<div align=start class=content>
<p>
First, before you go any further&mldr; check to make sure the image
you&rsquo;re trying isn&rsquo;t just broken.
</p>
<p>
I visited the image in the browser and realized that the browser supported the
format, so the broken preview had to be somewhere in filepicker.
</p>
<p>
In my case I was using a(n) <code>.ico</code> file and since filepicker.io
<a href=https://developers.filepicker.io/docs/web/rest/#blob-images>only supports post processing on <code>.jpg</code> and <code>.png</code></a>
I had to come up with a work around.
</p>
<p>
Once I realized the breakage was in the <code>/convert</code> directive that
was automatically filled in for me by the <em>rails gods</em>, the search was
on. I dug through the application layer and the gem and I couldn&rsquo;t get
it to relinquish its post processing madness.
</p>
<p>
So I did what any programmer would do. I hacked the preview to use the plain
filepicker url instead of decorating it and it worked great™. I used
javascript but I&rsquo;m sure the tangled mess you end up different will
require different scissors. I wrote this in case it should one day help a
frustrated programmer in need if nothing else, with the simple knowledge that
he is not alone in his plight.
</p>
</div>
<h4 class=page-header>Related</h4>
<div class=item>
<h4><a href=/post/2020-08-14-GitHub-Inbox-Zero-9892d6/>GitHub Inbox Zero</a></h4>
<h5>August 14, 2020</h5>
<a href=//www.brysgo.com/tags/development><kbd class=item-tag>development</kbd></a>
<a href=//www.brysgo.com/tags/devops><kbd class=item-tag>devops</kbd></a>
<a href=//www.brysgo.com/tags/quarantine><kbd class=item-tag>quarantine</kbd></a>
<a href=//www.brysgo.com/tags/open-source><kbd class=item-tag>open source</kbd></a>
</div>
<div class=item>
<h4><a href=/post/2020-08-08-the-yin-and-yang-of-dc939a/>the yin and yang of utility</a></h4>
<h5>August 8, 2020</h5>
<a href=//www.brysgo.com/tags/development><kbd class=item-tag>development</kbd></a>
<a href=//www.brysgo.com/tags/quirky><kbd class=item-tag>quirky</kbd></a>
<a href=//www.brysgo.com/tags/life><kbd class=item-tag>life</kbd></a>
<a href=//www.brysgo.com/tags/shower-thoughts><kbd class=item-tag>shower thoughts</kbd></a>
<a href=//www.brysgo.com/tags/philosophy><kbd class=item-tag>philosophy</kbd></a>
</div>
<div class=item>
<h4><a href=/post/2020-08-06-coming-soon-peersta-415acc/>coming soon: peerstate</a></h4>
<h5>August 6, 2020</h5>
<a href=//www.brysgo.com/tags/development><kbd class=item-tag>development</kbd></a>
<a href=//www.brysgo.com/tags/backstory><kbd class=item-tag>backstory</kbd></a>
<a href=//www.brysgo.com/tags/open-source><kbd class=item-tag>open source</kbd></a>
</div>
<h4 class=page-header>Comments</h4>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//brysgo.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</main>
<footer>
<p class="copyright text-muted">© 2020 Bryan Goldstein, All rights reserved.</p>
</footer>
</body>
</html>